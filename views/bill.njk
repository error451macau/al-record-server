{% extends "parent.njk" %}

{% block title %}{{bill.title}}{% endblock %}

{% block body %}
    <div class="bill container clear-margin">
        <div class="bill-result right">
            <div>{{__('BILL_RESULT')}}</div>
            <div class="bill-result__text result-{{bill.result | lower}} content-highlight">{{__('BILL_RESULT_' + bill.result)}}</div>
        </div>
        <h3>{{bill.title}}</h3>
        <div>
            {% set proposer = deputiesDict[bill.proposerDeputyId] %}
            <span>{{__('BILL_PROPOSER')}}{{__(': ')}}{{proposer.nameChi}} ({{__('DEPUTY_METHOD_SHORT_' + proposer.electedMethod)}})</span>&nbsp;&nbsp;&nbsp;
            <span>{{__('BILL_PROPOSE_DATE')}}{{__(': ')}}{{bill.date | dateFormat}}</span>
        </div>
        <section class="bill-synopsis">
            <strong>{{__('BILL_SYNOPSIS')}}</strong>
            <div class="content-highlight">{{bill.synopsis}}</div>
        </section>
        <section class="bill-votes-section">
            <strong>{{__('BILL_VOTES')}}</strong>
            <div class="content-highlight content-highlight--equal-padding">
                <ul class="bill-votes">
                    {% for deputyVote in bill.deputyVotes %}
                        {% set deputy = deputiesDict[deputyVote.deputyId] %}
                        <li class="bill-vote bill-vote--{{deputyVote.vote | lower}}" data-vote="{{deputyVote.vote}}" data-elected-method="{{deputy.electedMethod}}">
                            <div class="bill-vote__inner">
                                <!-- {{ deputyVote | dump | safe }} -->
                                <img src="{{mklink('/img/deputies/' + deputy.id + '.jpg')}}">
                                <div class="name">{{deputy.nameChi}}</div>
                                <div class="sub-content">
                                    <span class="left method">{{__('DEPUTY_METHOD_SHORT_' + deputy.electedMethod)}}</span>
                                    <span class="right vote vote-{{deputyVote.vote | lower}} bold">{{__('VOTE_' + deputyVote.vote)}}</span>
                                </div>
                            </div>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </section>
        <section class="bill-documents">
            <strong>{{__('BILL_DOCUMENTS')}}</strong>
        </section>
        <!--{{bill | dump}}<br>
        {{deputiesDict | dump}}-->
    </div>
{% endblock %}
